%import common.ESCAPED_STRING
%import common.SIGNED_NUMBER
%import common.LCASE_LETTER


_WORD_SEPARATOR: " "

?start : dollar_line

?dollar_line : "$" _WORD_SEPARATOR value

?value : strict | loose | ruling | image

strict : [qualification] [_WORD_SEPARATOR] extent _WORD_SEPARATOR scope [state] [_WORD_SEPARATOR] [STATUS]

!old.-2: /.+/?

!qualification.2 : "at least" | "at most" | "about"

!extent.2 : "several" | "some" | number | range | "rest of" | "start of"
    | "beginning of" |"middle of" | "end of"


!scope : object | surface | "column" | "columns" | "line" | "lines" | "case" | "cases"
    | "side" | "excerpt"

!state : "blank" | "broken" | "effaced" | "illegible" | "missing " | "traces "
    | "omitted" | "continues"

STATUS : "*" | "?" | "!" | "!?"

range : number "-" number

!object : "tablet" | "envelope" | "prism" | "bulla" | "fragment" | generic_object

generic_object : OBJECT _WORD_SEPARATOR TEXT
OBJECT : "object"

!surface : "observe" | "reverse" | "left" | "right" | "top" | "bottom" | "face"
    | generic_surface | "edge"


!generic_surface : "surface" TEXTS

!loose.-1 : /\(.+\)/

ruling : NUMBER _WORD_SEPARATOR RULING

NUMBER : ("single" | "double" | "triple")
RULING : "ruling"


image : _IMAGE _WORD_SEPARATOR DIGIT [LOWER_CASE_LETTER] _WORD_SEPARATOR "=" _WORD_SEPARATOR TEXTS

_IMAGE : "(image"
DIGIT : /[0-9]+/
LOWER_CASE_LETTER : /[a-z]/

TEXT : /.+?\s/
TEXTS : /.+\)/
number : SIGNED_NUMBER
lower_case_letter : LCASE_LETTER
